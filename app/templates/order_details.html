{% extends "base.html" %}
{% block title %}Деталі замовлення{% endblock %}
{% block content %}
<div class="order-details p-8 bg-white rounded-lg shadow-lg">
    <h1 class="text-3xl font-bold text-center mb-4">Деталі замовлення #{{ order['id'] }} </h1>

    <!-- Інформація про замовлення -->
    <div class="order-info space-y-2 mb-6">
        <p><span class="font-medium">Email:</span> {{ order['email'] }}</p>
        <p><span class="font-medium">Адреса:</span> {{ order['address'] }}</p>
        <p><span class="font-medium">Загальна сума:</span> {{ order['total_price'] }} грн</p>
        <p><span class="font-medium">Статус:</span> {{ order['status'] }}</p>
        <p><span class="font-medium">Дата:</span> {{ order['date'] }}</p>
    </div>

    <!-- Список товарів у замовленні -->
    <h2 class="text-xl font-bold mb-2">Товари в замовленні:</h2>
    <table class="order-items w-full border-collapse border border-gray-200">
        <thead>
            <tr class="bg-gray-200">
                <th class="text-left px-4 py-2 border">Назва</th>
                <th class="text-left px-4 py-2 border">Ціна</th>
                <th class="text-left px-4 py-2 border">Кількість</th>
                <th class="text-left px-4 py-2 border">Сума</th>
            </tr>
        </thead>
        <tbody>
            {% for item in items %}
            <tr>
                <td class="px-4 py-2 border">{{ item['name'] }}</td>
                <td class="px-4 py-2 border">{{ item['price'] }} грн</td>
                <td class="px-4 py-2 border">{{ item['quantity'] }}</td>
                <td class="px-4 py-2 border">{{ item['price'] * item['quantity'] }} грн</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <!-- Зміна статусу -->
    <div class="order-status-update mt-6">
        <h2 class="text-2xl font-bold mb-2">Змінити статус замовлення</h2>
        <form action="{{ url_for('admin.update_order', order_id=order['id']) }}" method="post" class="flex items-center">
            <select name="status" class="p-2 border rounded mr-4">
                <option value="Нове" {% if order['status'] == 'Нове' %}selected{% endif %}>Нове</option>
                <option value="В обробці" {% if order['status'] == 'В обробці' %}selected{% endif %}>В обробці</option>
                <option value="Відправлено" {% if order['status'] == 'Відправлено' %}selected{% endif %}>Відправлено</option>
                <option value="Доставлено" {% if order['status'] == 'Доставлено' %}selected{% endif %}>Доставлено</option>
                <option value="Скасовано" {% if order['status'] == 'Скасовано' %}selected{% endif %}>Скасовано</option>
            </select>
            <button type="submit" class="bg-black text-white px-4 py-2 rounded">Оновити статус</button>
        </form>
    </div>

    <!-- Кнопка повернення -->
    <div class="return-link mt-6">
        <a href="{{ url_for('admin.admin') }}" class="bg-gray-300 px-4 py-2 rounded text-black hover:bg-gray-400">Повернутися до списку замовлень</a>
    </div>
</div>

{% endblock %}