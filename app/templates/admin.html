{% extends "base.html" %}
{% block title %}Адмін-панель{% endblock %}
{% block content %}
<div class="bg-white shadow-lg rounded-lg">
  <!-- Заголовок адмін-панелі -->
  <div class="bg-black text-white px-6 py-4">
    <h1 class="text-3xl font-extrabold tracking-wide  text-center">Адмін панель</h1> 
  </div>

  <!-- Блок замовлень -->
  <div class="p-6">
    <h2 class="bg-gray-200 text-black px-4 py-2 rounded-md text-lg font-semibold font-sans tracking-wide">Замовлення</h2>
    <div class="overflow-x-auto mt-4">
      <table class="min-w-full border-collapse border border-gray-300 text-sm font-sans">
        <thead class="bg-gray-100">
          <tr>
            <th class="border border-gray-300 px-4 py-3 text-gray-600 text-left">ID</th>
            <th class="border border-gray-300 px-4 py-3 text-gray-600 text-left">Email</th>
            <th class="border border-gray-300 px-4 py-3 text-gray-600 text-left">Сума</th>
            <th class="border border-gray-300 px-4 py-3 text-gray-600 text-left">Статус</th>
            <th class="border border-gray-300 px-4 py-3 text-gray-600 text-left">Дата</th>
            <th class="border border-gray-300 px-4 py-3 text-gray-600 text-left">Дії</th>
          </tr>
        </thead>
        <tbody class="divide-y divide-gray-200">
          {% for order in orders %}
          <tr class="hover:bg-gray-50">
            <td class="border border-gray-300 px-4 py-2">{{ order['id'] }}</td>
            <td class="border border-gray-300 px-4 py-2">{{ order['email'] }}</td>
            <td class="border border-gray-300 px-4 py-2">{{ order['total_price'] }} грн</td>
            <td class="border border-gray-300 px-4 py-2">
              <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full 
              {% if order['status'] == 'Нове' %}bg-green-100 text-green-800
              {% elif order['status'] == 'В обробці' %}bg-yellow-100 text-yellow-800
              {% elif order['status'] == 'Відправлено' %}bg-blue-100 text-blue-800
              {% elif order['status'] == 'Доставлено' %}bg-purple-100 text-purple-800
              {% else %}bg-red-100 text-red-800{% endif %}">
                {{ order['status'] }}
              </span>
            </td>
            <td class="border border-gray-300 px-4 py-2">{{ order['date'] }}</td>
            <td class="border border-gray-300 px-4 py-2">
              <a href="{{ url_for('admin.order_details', order_id=order['id']) }}" class="text-blue-500 hover:underline">Деталі</a>
              <form action="{{ url_for('admin.delete_order_route', order_id=order['id']) }}" method="post" class="inline">
                <button type="submit" class="text-pink-500 hover:underline ml-2">Видалити</button>
              </form>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>

  <!-- Блок повідомлень -->
  <div class="p-6">
    <h2 class="bg-gray-200 text-black px-4 py-2 rounded-md text-lg font-semibold font-sans tracking-wide">Повідомлення зворотного зв'язку</h2>
    <div class="overflow-x-auto mt-4">
      <table class="min-w-full border-collapse border border-gray-300 text-sm font-sans">
        <thead class="bg-gray-100">
          <tr>
            <th class="border border-gray-300 px-4 py-3 text-gray-600 text-left">ID</th>
            <th class="border border-gray-300 px-4 py-3 text-gray-600 text-left">Ім'я</th>
            <th class="border border-gray-300 px-4 py-3 text-gray-600 text-left">Email</th>
            <th class="border border-gray-300 px-4 py-3 text-gray-600 text-left">Повідомлення</th>
            <th class="border border-gray-300 px-4 py-3 text-gray-600 text-left">Дії</th>
          </tr>
        </thead>
        <tbody class="divide-y divide-gray-200">
          {% for item in feedback %}
          <tr class="hover:bg-gray-50">
            <td class="border border-gray-300 px-4 py-2">{{ item['id'] }}</td>
            <td class="border border-gray-300 px-4 py-2">{{ item['name'] }}</td>
            <td class="border border-gray-300 px-4 py-2">{{ item['email'] }}</td>
            <td class="border border-gray-300 px-4 py-2">
              <div class="truncate max-w-xs">{{ item['message'] }}</div>
            </td>
            <td class="border border-gray-300 px-4 py-2">
              <form action="{{ url_for('admin.delete_feedback', id=item['id']) }}" method="post">
                <button type="submit" class="text-pink-500 hover:underline">Видалити</button>
              </form>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>

{% endblock %}